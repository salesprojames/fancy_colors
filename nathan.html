<!DOCTYPE html>
<html>
<head>
  <title>Fireworks</title>
</head>
<body>
  <canvas id="canvas" width="1400px" height="800px" style="background-color: black;"></canvas>
  <script type="text/javascript">
    //Create the Canvas
    var canvas = document.getElementById("canvas");
    var context = canvas.getContext("2d");

    var colors = [
      "red",
      "blue",
      "green",
      "orange",
      "white",
      "purple",
      "yellow",
      "pink"
    ];

    var circles = [];

    var gameSettings = {
      numberOfCircles: 20,
      maxSize: 40,
      cornerSteps: 30
    }

    //Generate Random Number
    function randomNum(max){
      return Math.floor(Math.random() * max)
    }

    //Create a certain number of circles
    function createCircles(n){
      for(i=0; i<n; i++) {
        circles.push(createCircle());
      }
    }

    function createCircle() {
      return {
        color: colors[randomNum(colors.length)],
        size: 5 + randomNum(gameSettings.maxSize),
        x: randomNum(canvas.width),
        y: randomNum(canvas.height),
        dir: randomNum(4),
        xSpeed: 0,
        ySpeed: 0
      }
    }

    function changeLocation(currentPoint, endPoint){
      return (endPoint - currentPoint)/gameSettings.cornerSteps
    }

    function setCircleSpeed(circle){
      if(circle.xSpeed == 0){
        if(circle.dir == 0){
          circle.xSpeed = changeLocation(circle.x, 0);
          circle.ySpeed = changeLocation(circle.y, 0);
        } else if(circle.dir == 1){
          circle.xSpeed = changeLocation(circle.x, canvas.width);
          circle.ySpeed = changeLocation(circle.y, 0);
        } else if(circle.dir == 2){
          circle.xSpeed = changeLocation(circle.x, canvas.width);
          circle.ySpeed = changeLocation(circle.y, canvas.height);
        } else if(circle.dir == 3){
          circle.xSpeed = changeLocation(circle.x, 0);
          circle.ySpeed = changeLocation(circle.y, canvas.height);
        }
      }
    }

    function offCanvas(circle){
      if(
          circle.x < 0 ||
          circle.x > canvas.width ||
          circle.y < 0 ||
          circle.y > canvas.height
        ){
        return true;
      }
    }

    function step() {
      for(i=0; i < circles.length; i++) {

        setCircleSpeed(circles[i]);
        circles[i].x += circles[i].xSpeed;
        circles[i].y += circles[i].ySpeed;

        if(offCanvas(circles[i])){
          circles[i] = createCircle();
        }
      }
    }

    //Draw the boxes on the screen
    function draw(){
      context.clearRect(0, 0, canvas.width, canvas.height);

      for(i=0; i<circles.length; i++) {
        context.beginPath();
        context.arc(
          circles[i].x,
          circles[i].y,
          circles[i].size,
          0,
          2*Math.PI
        );
        context.fillStyle = circles[i].color;
        context.fill();
        context.stroke();
      }
    }

    // context.beginPath();
    // context.arc(200,150,100,0,2*Math.PI);

    function runGame(){
      step();
      draw();
      requestAnimationFrame(runGame);
    }

    createCircles(gameSettings.numberOfCircles);
    runGame();

  </script>
</body>
</html>
